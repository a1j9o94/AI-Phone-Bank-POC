INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.31:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:172.31.128.1 - - [11/May/2023 01:49:20] "GET / HTTP/1.1" 200 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 01:50:04] "GET / HTTP/1.1" 200 -
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.30:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:47:42] "[33mOPTIONS * HTTP/1.1[0m" 404 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:47:43] "GET / HTTP/1.1" 200 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:47:44] "GET / HTTP/1.1" 200 -
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.30:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:47:55] "GET / HTTP/1.1" 200 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:51:20] "GET / HTTP/1.1" 200 -
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.30:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:52:20] "[33mOPTIONS * HTTP/1.1[0m" 404 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:52:21] "[32mGET / HTTP/1.1[0m" 302 -
INFO:main:Processing voter call...
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:52:21] "GET /voter_call HTTP/1.1" 200 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:52:21] "[32mGET / HTTP/1.1[0m" 302 -
INFO:main:Processing voter call...
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:52:21] "GET /voter_call HTTP/1.1" 200 -
INFO:main:Processing voter call...
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:53:03] "GET /voter_call HTTP/1.1" 200 -
INFO:main:Processing voter call...
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:53:45] "GET /voter_call HTTP/1.1" 200 -
INFO:main:Processing voter call...
INFO:main:System prompt: System: You are a campaign worker trying to convince Harshita to go vote in the upcoming House District 5 race taking place on 2023-05-31, and vote for your preferred candidate, Adrian Obleton. You speak casually, and try not to overwhelm the voter with too much information. Keep your comments short, but welcoming. You should listen more than you talk. You're responses should be concicse, informative, and understanding. You ask lots of questions to understand what is important to Harshita. Begin by asking if they are aware of the up coming election. Do not reveal that you are an AI bot.
	
	You know the following information about the race:
	This is a state house race
	
	The race is going to held on 2023-05-31.
	
	You know the following infomration about the candidate:
	You believe in the importance of social impact and political engagement.
Criminal justice reform, with a focus on rehabilitation and addressing the root causes of crime, is a priority for you.
You advocate for meeting basic needs like housing, food, and healthcare for all.
You value openness to different perspectives and a scout mindset.
You support workers' rights, unions, social services, and a reduction in military spending.
You believe in investing in education and addressing climate change through renewable energy.
You have a nuanced view on immigration, leaning towards a more open approach.
Your approach to foreign policy prioritizes diplomacy and operations over military force.
You are not religious, but support religious freedom as long as it doesn't harm others.
You are concerned about potential discrimination based on religious beliefs.
	
	You know the following about the voter:
	Harshita Cares about education and healthcare, but is concerned about government spending
	
INFO:main:User number: +17066641258
INFO:main:Redirecting to call route...
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:55:21] "[32mPOST /voter_call HTTP/1.1[0m" 302 -
INFO:main:Starting call with system prompt 'System: You are a campaign worker trying to convince Harshita to go vote in the upcoming House District 5 race taking place on 2023-05-31, and vote for your preferred candidate, Adrian Obleton. You speak casually, and try not to overwhelm the voter with too much information. Keep your comments short, but welcoming. You should listen more than you talk. You're responses should be concicse, informative, and understanding. You ask lots of questions to understand what is important to Harshita. Begin by asking if they are aware of the up coming election. Do not reveal that you are an AI bot.
	
	You know the following information about the race:
	This is a state house race
	
	The race is going to held on 2023-05-31.
	
	You know the following infomration about the candidate:
	You believe in the importance of social impact and political engagement.
Criminal justice reform, with a focus on rehabilitation and addressing the root causes of crime, is a priority for you.
You advocate for meeting basic needs like housing, food, and healthcare for all.
You value openness to different perspectives and a scout mindset.
You support workers' rights, unions, social services, and a reduction in military spending.
You believe in investing in education and addressing climate change through renewable energy.
You have a nuanced view on immigration, leaning towards a more open approach.
Your approach to foreign policy prioritizes diplomacy and operations over military force.
You are not religious, but support religious freedom as long as it doesn't harm others.
You are concerned about potential discrimination based on religious beliefs.
	
	You know the following about the voter:
	Harshita Cares about education and healthcare, but is concerned about government spending
	' and user number '+17066641258'
INFO:twilio.http_client:-- BEGIN Twilio API Request --
INFO:twilio.http_client:POST Request: https://api.twilio.com/2010-04-01/Accounts/AC4e1d8306bfb55bfcbfcf5a14b098bc59/Calls.json
INFO:twilio.http_client:Headers:
INFO:twilio.http_client:User-Agent : twilio-python/8.2.0 (Linux x86_64) Python/3.10.8
INFO:twilio.http_client:X-Twilio-Client : python-8.2.0
INFO:twilio.http_client:Accept-Charset : utf-8
INFO:twilio.http_client:Content-Type : application/x-www-form-urlencoded
INFO:twilio.http_client:Accept : application/json
INFO:twilio.http_client:-- END Twilio API Request --
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): api.twilio.com:443
DEBUG:urllib3.connectionpool:https://api.twilio.com:443 "POST /2010-04-01/Accounts/AC4e1d8306bfb55bfcbfcf5a14b098bc59/Calls.json HTTP/1.1" 201 2107
INFO:twilio.http_client:Response Status Code: 201
INFO:twilio.http_client:Response Headers: {'Date': 'Thu, 11 May 2023 03:55:21 GMT', 'Content-Type': 'application/json; charset=utf-8', 'Content-Length': '2107', 'Connection': 'keep-alive', 'Twilio-Request-Id': 'RQab12b1347e068b9e3081b2dd9f48d514', 'Twilio-Request-Duration': '0.053', 'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Headers': 'Accept, Authorization, Content-Type, If-Match, If-Modified-Since, If-None-Match, If-Unmodified-Since, Idempotency-Key', 'Access-Control-Allow-Methods': 'GET, POST, DELETE, OPTIONS', 'Access-Control-Expose-Headers': 'ETag', 'Access-Control-Allow-Credentials': 'true', 'X-Powered-By': 'AT-5000', 'Twilio-Concurrent-Requests': '1', 'X-Shenanigans': 'none', 'X-Home-Region': 'us1', 'X-API-Domain': 'api.twilio.com', 'Strict-Transport-Security': 'max-age=31536000'}
INFO:main:Started call with SID 'CA7730bd427feb8e517439d7c3f58c7537'
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:55:21] "GET /call HTTP/1.1" 200 -
DEBUG:openai:message='Request to OpenAI API' method=post path=https://api.openai.com/v1/chat/completions
DEBUG:openai:api_version=None data='{"model": "gpt-3.5-turbo", "messages": null, "temperature": 0.7}' message='Post details'
DEBUG:urllib3.util.retry:Converted retries value: 2 -> Retry(total=2, connect=None, read=None, redirect=None, status=None)
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): api.openai.com:443
DEBUG:urllib3.connectionpool:https://api.openai.com:443 "POST /v1/chat/completions HTTP/1.1" 400 153
DEBUG:openai:message='OpenAI API response' path=https://api.openai.com/v1/chat/completions processing_ms=3 request_id=7f910f58b68ff2582fd98e5e8681ce4c response_code=400
INFO:openai:error_code=None error_message="None is not of type 'array' - 'messages'" error_param=None error_type=invalid_request_error message='OpenAI API error received' stream_error=False
ERROR:main:Exception on /twilio [POST]
Traceback (most recent call last):
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/flask/app.py", line 2525, in wsgi_app
    response = self.full_dispatch_request()
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/flask/app.py", line 1822, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/flask/app.py", line 1820, in full_dispatch_request
    rv = self.dispatch_request()
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/flask/app.py", line 1796, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
  File "main.py", line 54, in twilio
    completion = openai.ChatCompletion.create(model="gpt-3.5-turbo",
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/openai/api_resources/chat_completion.py", line 25, in create
    return super().create(*args, **kwargs)
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 153, in create
    response, _, api_key = requestor.request(
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 230, in request
    resp, got_stream = self._interpret_response(result, stream)
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 624, in _interpret_response
    self._interpret_response_line(
  File "/home/runner/AI-Phone-Bank-POC/venv/lib/python3.10/site-packages/openai/api_requestor.py", line 687, in _interpret_response_line
    raise self.handle_error_response(
openai.error.InvalidRequestError: None is not of type 'array' - 'messages'
INFO:werkzeug:172.31.128.1 - - [11/May/2023 03:55:36] "[35m[1mPOST /twilio HTTP/1.1[0m" 500 -
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.128.30:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m
INFO:werkzeug:172.31.128.1 - - [11/May/2023 04:00:51] "[33mOPTIONS * HTTP/1.1[0m" 404 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 04:00:52] "[32mGET / HTTP/1.1[0m" 302 -
INFO:werkzeug:172.31.128.1 - - [11/May/2023 04:00:52] "[32mGET / HTTP/1.1[0m" 302 -
INFO:main:Processing voter call...
INFO:werkzeug:172.31.128.1 - - [11/May/2023 04:00:52] "GET /voter_call HTTP/1.1" 200 -
